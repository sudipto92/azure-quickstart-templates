 {
 	"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
 	"contentVersion": "1.0.0.0",
 	"parameters": {
 		"resourceGroup": {
 			"type": "string",
 			"defaultValue": "Devops_init"
 		},
 		"subscriptionID": {
 			"type": "string",
 			"defaultValue": "68ef03fa-8f28-44b6-a1dd-13113c3eb580"
 		},
 		"storageName": {
 			"type": "string",
 			"defaultValue": "teststorage"
 		},
 		"keyvault_name": {
 			"type": "String"
 		},
 		"location": {
 			"type": "String"
 		},
 		"sku": {
 			"type": "String"
 		},
 		"keyName": {
 			"type": "String"
 		},
 		"accessPolicies": {
 			"type": "Array"
 		},
 		"tenant": {
 			"type": "String"
 		},
 		"enabledForDeployment": {
 			"type": "Bool"
 		},
 		"enabledForTemplateDeployment": {
 			"type": "Bool"
 		},
 		"enabledForDiskEncryption": {
 			"type": "Bool"
 		},
 		"enableRbacAuthorization": {
 			"type": "Bool"
 		},
 		"enableSoftDelete": {
 			"type": "Bool"
 		},
 		"softDeleteRetentionInDays": {
 			"type": "Int"
 		},
 		"networkAcls": {
 			"type": "Object"
 		}
 	},
 	"resources": [{
 			"type": "Microsoft.Resources/resourceGroups",
 			"apiVersion": "2018-05-01",
 			"location": "[parameters('location')]",
 			"name": "[parameters('resourceGroup')]"
 		},
 		{
 			"type": "Microsoft.Resources/deployments",
 			"apiVersion": "2019-10-01",
 			"name": "nestedTemplate",
 			"resourceGroup": "[parameters('resourceGroup')]",
 			"subscriptionId": "[parameters('subscriptionID')]",
			"dependsOn": [
 				"[resourceId('Microsoft.Resources/resourceGroups', parameters('resourceGroup'))]"
 			],
 			"properties": {
 				"mode": "Incremental",
 				"template": {
 					"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
 					"contentVersion": "1.0.0.0",
 					"parameters": {
 						"keyvault_name": {
 							"type": "String",
 							"defaultValue": "[parameters('keyvault_name')]"
 						},
 						"location": {
 							"type": "String",
 							"defaultValue": "[parameters('location')]"
 						},
 						"sku": {
 							"type": "String",
 							"defaultValue": "[parameters('sku')]"
 						},
 						"keyName": {
 							"type": "String",
 							"defaultValue": "[parameters('keyName')]"
 						},
 						"accessPolicies": {
 							"type": "Array",
 							"defaultValue": "[parameters('accessPolicies')]"
 						},
 						"tenant": {
 							"type": "String",
 							"defaultValue": "[parameters('tenant')]"
 						},
 						"enabledForDeployment": {
 							"type": "Bool",
 							"defaultValue": "[parameters('enabledForDeployment')]"
 						},
 						"enabledForTemplateDeployment": {
 							"type": "Bool",
 							"defaultValue": "[parameters('enabledForTemplateDeployment')]"
 						},
 						"enabledForDiskEncryption": {
 							"type": "Bool",
 							"defaultValue": "[parameters('enabledForDiskEncryption')]"
 						},
 						"enableRbacAuthorization": {
 							"type": "Bool",
 							"defaultValue": "[parameters('enableRbacAuthorization')]"
 						},
 						"enableSoftDelete": {
 							"type": "Bool",
 							"defaultValue": "[parameters('enableSoftDelete')]"
 						},
 						"softDeleteRetentionInDays": {
 							"type": "Int",
 							"defaultValue": "[parameters('softDeleteRetentionInDays')]"
 						},
 						"networkAcls": {
 							"type": "Object",
 							"defaultValue": "[parameters('networkAcls')]"
 						}
 					},
 					"variables": {},
 					"resources": [{
 							"type": "Microsoft.KeyVault/vaults",
 							"apiVersion": "2018-02-14",
 							"name": "[parameters('keyvault_name')]",
 							"location": "[parameters('location')]",
 							"properties": {
 								"enabledForDeployment": "[parameters('enabledForDeployment')]",
 								"enabledForTemplateDeployment": "[parameters('enabledForTemplateDeployment')]",
 								"enabledForDiskEncryption": "[parameters('enabledForDiskEncryption')]",
 								"enableRbacAuthorization": "[parameters('enableRbacAuthorization')]",
 								"accessPolicies": "[parameters('accessPolicies')]",
 								"tenantId": "[parameters('tenant')]",
 								"sku": {
 									"name": "[parameters('sku')]",
 									"family": "A"
 								},
 								"enableSoftDelete": "[parameters('enableSoftDelete')]",
 								"softDeleteRetentionInDays": "[parameters('softDeleteRetentionInDays')]",
 								"networkAcls": "[parameters('networkAcls')]"
 							}
 						},
 						
 						{
 							"type": "Microsoft.Storage/storageAccounts",
 							"apiVersion": "2019-06-01",
 							"name": "[parameters('storageName')]",
 							"location": "[parameters('location')]",
 							"sku": {
 								"name": "Standard_LRS"
 							},
 							"kind": "Storage",
 							"properties": {}
 						}
 					]
 				},
 				"parameters": {}
 			}
 		}
 	]
 }
