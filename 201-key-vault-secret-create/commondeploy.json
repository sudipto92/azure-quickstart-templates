{
	"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"siteName": {
			"type": "string",
			"defaultValue": "abc12345"
		},
		"resource_Group": {
			"type": "string",
			"defaultValue": "devopsinit"
		},
		"_artifactsLocation": {
			"type": "string",
			"metadata": {
				"description": "The base URI where artifacts required by this template are located including a trailing '/'"
			},
			"defaultValue": "https://raw.githubusercontent.com/sudipto92/azure-quickstart-templates/master/201-key-vault-secret-create/"
		},
		"_artifactsLocationSasToken": {
			"type": "securestring",
			"metadata": {
				"description": "The sasToken required to access _artifactsLocation.  When the template is deployed using the accompanying scripts, a sasToken will be automatically generated. Use the defaultValue if the staging location is not secured."
			},
			"defaultValue": ""
		},
		"keyvault_name": {
			"type": "String"
		},
		"keyName": {
			"type": "String"
		}
	},
	"variables": {
		"acrName": "[concat(parameters('siteName'), 'acr')]"
	},
	"resources": [{
			"type": "Microsoft.Resources/resourceGroups",
			"apiVersion": "2018-05-01",
			"location": "eastus",
			"name": "[parameters('resource_Group')]"
		},
		{
			"apiVersion": "2017-05-10",
			"name": "linkedAcrTemplateACR",
			"type": "Microsoft.Resources/deployments",
			"resourceGroup": "[parameters('resource_Group')]",
			"dependsOn": [
				"[resourceId('Microsoft.Resources/resourceGroups', parameters('resource_Group'))]"
			],
			"properties": {
				"mode": "Incremental",
				"templateLink": {
					"uri": "https://raw.githubusercontent.com/sudipto92/azure-quickstart-templates/master/201-key-vault-secret-create/combi.json",
					"contentVersion ": "1.0 .0 .0"
				},
				"parameters": {
					"acrName": {
						"value": "[variables('acrName')]"
					},
					"acrAdminUserEnabled": {
						"value": true
					},
					"keyvault_name": {
						"value": "[parameters('keyvault_name')]"
					},
					"location": {
						"value": "[resourceGroup().location]"
					},
					"keyName": {
						"value": "[parameters('keyName')]"
					}
				}
			}
		}
	]
}
